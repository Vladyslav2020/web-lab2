{"version":3,"sources":["Config.js","SendEmailForm.js","useHttp.js","Loader.js","Message.js","App.js","index.js"],"names":["Config","needToAddEventListeners","needToCheckValidation","SendEmailForm","showLoader","hideLoader","showMessage","hideMessage","useState","isValid","setIsValid","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","status","console","log","Error","ok","message","cleanErrors","useHttp","form","useRef","firstName","lastName","subject","state","setState","useEffect","changeState","key","newValue","prevState","current","checkValidity","sendEmail","event","preventDefault","classList","add","type","setTimeout","className","noValidate","ref","htmlFor","id","value","onChange","target","required","onClick","disabled","Loader","role","Message","_className","CSSTransition","in","length","timeout","classNames","mountOnEnter","unmountOnExit","App","report","setReport","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aee9fac4.chunk.js","sourcesContent":["export const Config = {\n    url: 'https://afternoon-shore-72034.herokuapp.com/api/send-mail',\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useHttp } from './useHttp';\nimport { Config } from './Config';\n\nlet needToAddEventListeners = true;\nlet needToCheckValidation = false;\n\nconst SendEmailForm = ({\n    showLoader,\n    hideLoader,\n    showMessage,\n    hideMessage,\n}) => {\n    const [isValid, setIsValid] = useState(true);\n    const { loading, request, cleanErrors } = useHttp();\n    const form = useRef(null);\n    const [state, setState] = useState({\n        firstName: '',\n        lastName: '',\n        subject: '',\n        message: '',\n    });\n    useEffect(() => {\n        if (loading) showLoader();\n        else hideLoader();\n    }, [loading]);\n\n    const changeState = (key, newValue) => {\n        setState(prevState => ({ ...prevState, [key]: newValue }));\n    };\n    useEffect(() => {\n        if (needToAddEventListeners) {\n            needToAddEventListeners = false;\n        }\n    }, []);\n\n    useEffect(() => {\n        if (!needToCheckValidation) {\n            return;\n        }\n        setIsValid(form.current.checkValidity());\n    });\n\n    const sendEmail = async event => {\n        event.preventDefault();\n        needToCheckValidation = true;\n        if (!form.current.checkValidity()) {\n            form.current.classList.add('was-validated');\n            return;\n        }\n        try {\n            const response = await request(Config.url, 'POST', { ...state });\n            showMessage({ message: response.message, type: 'success' });\n            setTimeout(hideMessage, 3000);\n        } catch (err) {\n            showMessage({ message: err.message, type: 'danger' });\n            setTimeout(hideMessage, 3000);\n            cleanErrors();\n        } finally {\n            needToCheckValidation = false;\n        }\n    };\n    return (\n        <div className=\"container mt-2\">\n            <form className=\"row g-3 needs-validation\" noValidate ref={form}>\n                <div className=\"md\">\n                    <label htmlFor=\"firstName\" className=\"form-label\">\n                        First name\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"firstName\"\n                        value={state.firstName}\n                        onChange={event =>\n                            changeState('firstName', event.target.value)\n                        }\n                        required\n                    />\n                    <div className=\"valid-feedback\">Validated!</div>\n                    <div className=\"invalid-feedback\">Invalid!</div>\n                </div>\n                <div className=\"md\">\n                    <label htmlFor=\"lastName\" className=\"form-label\">\n                        Last name\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"lastName\"\n                        value={state.lastName}\n                        onChange={event =>\n                            changeState('lastName', event.target.value)\n                        }\n                        required\n                    />\n                    <div className=\"valid-feedback\">Validated!</div>\n                    <div className=\"invalid-feedback\">Invalid!</div>\n                </div>\n                <div className=\"md\">\n                    <label htmlFor=\"subject\" className=\"form-label\">\n                        Subject\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"subject\"\n                        value={state.subject}\n                        onChange={event =>\n                            changeState('subject', event.target.value)\n                        }\n                        required\n                    />\n                    <div className=\"valid-feedback\">Validated!</div>\n                    <div className=\"invalid-feedback\">Invalid!</div>\n                </div>\n                <div className=\"md\">\n                    <label htmlFor=\"message\" className=\"form-label\">\n                        Email message\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"message\"\n                        value={state.message}\n                        onChange={event =>\n                            changeState('message', event.target.value)\n                        }\n                        required\n                    />\n                    <div className=\"valid-feedback\">Validated!</div>\n                    <div className=\"invalid-feedback\">Invalid!</div>\n                </div>\n                <div className=\"col-12\">\n                    <button\n                        className=\"btn btn-primary\"\n                        type=\"button\"\n                        onClick={sendEmail}\n                        disabled={\n                            loading || (!isValid && needToCheckValidation)\n                        }\n                    >\n                        Submit form\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default SendEmailForm;\n","import { useState, useCallback } from 'react';\n\nexport const useHttp = () => {\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n    const request = useCallback(\n        async (url, method = 'GET', body = null, headers = {}) => {\n            try {\n                setLoading(true);\n                if (body) {\n                    body = JSON.stringify(body);\n                    headers['Content-Type'] = 'application/json';\n                }\n                const response = await fetch(url, { method, body, headers });\n                const data = await response.json();\n                if (response.status === 401) {\n                    console.log('No authorization');\n                    throw new Error('No authorization');\n                }\n                if (!response.ok) {\n                    console.log('Something went wrong: ' + data.message);\n                }\n                setLoading(false);\n                return data;\n            } catch (err) {\n                setLoading(false);\n                setError(err);\n                throw err;\n            }\n        },\n        [],\n    );\n    const cleanErrors = useCallback(() => setError(null), []);\n    return { loading, request, error, cleanErrors };\n};\n","import React from 'react';\n\nconst Loader = () => {\n    return (\n        <div className=\"loader\">\n            <div className=\"spinner-border text-primary\" role=\"status\">\n                <span className=\"visually-hidden\">Loading...</span>\n            </div>\n        </div>\n    );\n};\n\nexport default Loader;\n","import React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport './index.css';\n\nconst Message = ({ type, message, hideMessage }) => {\n    const _className =\n        'alert-dismissible message fade show alert alert-' + type;\n    return (\n        <CSSTransition\n            in={type.length > 0}\n            timeout={400}\n            classNames=\"message\"\n            mountOnEnter\n            unmountOnExit\n        >\n            <div className={_className} role=\"alert\">\n                <strong>Attention!! </strong>\n                {message}\n                <button\n                    className=\"btn-close\"\n                    data-bs-dismiss=\"alert\"\n                    aria-label=\"Close\"\n                    onClick={() => hideMessage()}\n                ></button>\n            </div>\n        </CSSTransition>\n    );\n};\n\nexport default Message;\n","import React, { useState } from 'react';\nimport SendEmailForm from './SendEmailForm';\nimport './index.css';\nimport Loader from './Loader';\nimport Message from './Message';\n\nconst App = () => {\n    const [loading, setLoading] = useState(false);\n    const [report, setReport] = useState({ message: '', type: '' });\n    const showLoader = () => {\n        setLoading(true);\n    };\n    const hideLoader = () => {\n        setLoading(false);\n    };\n    const showMessage = ({ type, message }) => {\n        setReport({ type, message });\n    };\n    const hideMessage = () => {\n        setReport({ message: '', type: '' });\n    };\n    return (\n        <div>\n            <Message\n                type={report.type}\n                message={report.message}\n                hideMessage={hideMessage}\n            />\n            <div className=\"container mt-2\">\n                <h2 className=\"text-center\">Fill send email form</h2>\n            </div>\n            <SendEmailForm\n                showLoader={showLoader}\n                hideLoader={hideLoader}\n                showMessage={showMessage}\n                hideMessage={hideMessage}\n            />\n            {loading && <Loader />}\n        </div>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}